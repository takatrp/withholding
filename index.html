<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>受取利息・受取配当金（法人） 仕訳自動表示ツール</title>
<link rel="icon" type="image/png" sizes="192x192" href="favicon192192.png">
<style>
  :root{ --brand:#578899; --bg:#f7fbfd; }
  html,body{margin:0;padding:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;color:#222;background:var(--bg)}
  .wrap{max-width:720px;margin:0 auto;padding:16px 14px 28px}

  /* ヘッダー（ロゴ＋タイトル） */
  .header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .header img.logo{height:48px;width:auto;display:block}
  .header h1{font-size:18px;margin:0;color:#123;letter-spacing:.02em}

  .card{background:#fff;border:1px solid #dde6ea;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.03);padding:14px 12px;margin:10px 0}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
  .label{font-size:13px;color:#345;min-width:6.5em}

  /* チップ（選択=太枠+濃色、非選択=無色） */
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip input{display:none}
  .chip label{
    display:inline-block;padding:8px 12px;border-radius:999px;border:1px solid #c9d7de;
    background:#fff;cursor:pointer;font-size:14px;color:#123;user-select:none;transition:.12s;
  }
  .chip input:checked + label{
    background:var(--brand);color:#fff;border-color:var(--brand);border-width:2px;font-weight:600;
    box-shadow:0 1px 0 rgba(0,0,0,.05), 0 0 0 2px rgba(87,136,153,.15);
  }
  .chip label:active{transform:translateY(1px)}

  .money{flex:1;min-width:150px;padding:10px 12px;font-size:16px;border:1px solid #c9d7de;border-radius:10px;background:#fff}
  .money::placeholder{color:#b8c4cc} /* プレースホルダーを薄く */
  .hint{font-size:12px;color:#567;margin-top:2px}
  .grid{display:grid;grid-template-columns:1fr auto;gap:8px 10px;margin-top:6px}
  .k{color:#456}
  .v{font-variant-numeric:tabular-nums;text-align:right}
  .strong{font-weight:700}
  .btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  button{appearance:none;border:1px solid var(--brand);background:var(--brand);color:#fff;border-radius:10px;padding:10px 14px;font-size:14px;cursor:pointer}
  button.outline{background:#fff;color:var(--brand)}
  .jrnl{font-family:ui-monospace,Menlo,Consolas,"Noto Sans Mono CJK JP",monospace;font-size:14px;background:#fafcff;border:1px dashed #c9d7de;border-radius:10px;padding:10px 12px;white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word}
  .footer{font-size:12px;color:#567;line-height:1.6;overflow-wrap:anywhere;word-break:break-word}
  .footer a{color:#245; text-underline-offset:2px}

  /* ミニフッター（1行・色継承＋下線） */
  .mk-mini{
    max-width:720px;margin:0 auto;padding:14px 12px 24px;
    font-size:12px; color:#345; text-align:center;
  }
  .mk-mini a{color:inherit;text-decoration:underline;text-underline-offset:2px}
</style>
</head>
<body>
<div class="wrap">
  <!-- ロゴは公式サイトへリンク -->
  <div class="header">
    <a href="https://www.matsumoto-kaikei.or.jp/" aria-label="税理士法人松本会計事務所 公式サイト">
      <img src="ロゴ.jpg" alt="税理士法人松本会計事務所 ロゴ" class="logo">
    </a>
    <h1>受取利息・受取配当金（法人）｜入金額→仕訳 自動表示</h1>
  </div>

  <div class="card">
    <div class="row">
      <div class="label">種類</div>
      <div class="chips">
        <div class="chip"><input type="radio" name="itype" id="t_interest" value="interest" checked><label for="t_interest">受取利息</label></div>
        <div class="chip"><input type="radio" name="itype" id="t_div" value="dividend"><label for="t_div">受取配当金</label></div>
      </div>
    </div>

    <div class="row" id="divSubRow" style="display:none">
      <div class="label">配当区分</div>
      <div class="chips">
        <div class="chip"><input type="radio" name="divkind" id="div_listed" value="listed" checked><label for="div_listed">上場株式等</label></div>
        <div class="chip"><input type="radio" name="divkind" id="div_unlisted" value="unlisted"><label for="div_unlisted">非上場等</label></div>
      </div>
    </div>

    <div class="row">
      <div class="label">入金額（手取）</div>
      <input class="money" id="net" inputmode="numeric" placeholder="例）64,000">
    </div>
    <div class="hint">国内支払・法人前提。源泉は各税額1円未満切捨てで逆算（最終値は支払明細で確認）。</div>

    <div class="row">
      <div class="label">税率（自動）</div>
      <div class="grid" style="flex:1">
        <div class="k">源泉（国税：所得税・復興特別所得税）</div><div class="v" id="rNat">—</div>
        <div class="k strong">合計源泉税率</div><div class="v strong" id="rTot">—</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="grid">
      <div class="k">源泉前総額（計上額）</div><div class="v strong" id="gross">—</div>
      <div class="k">源泉所得税等（国税）</div><div class="v" id="taxNat">—</div>
      <div class="k">手取額（入金額）</div><div class="v" id="netOut">—</div>
    </div>
  </div>

  <div class="card">
    <div class="row" style="margin-top:0"><div class="label">仕訳（例）</div></div>
    <div class="jrnl" id="je">入金額を入力すると自動表示します。</div>
    <div class="btns">
      <button class="outline" id="copyBtn">仕訳をコピー</button>
      <button id="resetBtn">リセット</button>
    </div>
    <div class="hint">※源泉分の勘定科目は<strong>「租税公課または法人税等」</strong>で出力します。</div>
  </div>

  <div class="card footer">
    <div style="font-weight:700;margin-bottom:6px">根拠（主な税率・取扱）</div>
    <ul>
      <li>配当の源泉徴収（法人）：上場株式等は <strong>15.315%</strong>、非上場等は <strong>20.42%</strong>（いずれも国税、復興特別所得税を含む）。国税庁タックスアンサー No.1330  
        <a href="https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1330.htm">https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1330.htm</a></li>
      <li>利子の源泉徴収（法人）：<strong>15.315%</strong>（国税のみ）。国税庁タックスアンサー No.1310  
        <a href="https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1310.htm">https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1310.htm</a></li>
      <li>法人の利子割（地方税5%）は2016/1/1以降 廃止。自治体告知例：宮城県・京都府  
        <a href="https://www.pref.miyagi.jp/soshiki/zeimu/houjinrishiwarihaishi.html">https://www.pref.miyagi.jp/soshiki/zeimu/houjinrishiwarihaishi.html</a> ／ 
        <a href="https://www.pref.kyoto.jp/zeimu/risiwarihais.html">https://www.pref.kyoto.jp/zeimu/risiwarihais.html</a></li>
    </ul>
  </div>
</div>

<!-- ミニフッター：© 年 事務所名 ｜ CC ｜ 利用条件 ｜ r4（最終更新日） -->
<footer class="mk-mini">
  © <span id="cpy-year">2025</span>
  <a href="https://www.matsumoto-kaikei.or.jp/" target="_blank" rel="noopener license">税理士法人松本会計事務所</a> ｜ 
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="license noopener">CC BY-NC-SA 4.0</a> ｜ 
  <a href="/tool-portal/terms.html" target="_blank" rel="noopener">利用条件</a> ｜ 
  <span id="build-rev">r4</span>（<span id="last-updated-date"></span>）
</footer>

<script>
/* 表示整形 */
const fmt = n => isNaN(n) ? "—" : n.toLocaleString("ja-JP",{maximumFractionDigits:0});
const uncomma = s => (s||"").toString().replace(/[^\d]/g,"")*1;

/* DOM参照 */
const els = {
  net: document.getElementById('net'),
  rNat: document.getElementById('rNat'),
  rTot: document.getElementById('rTot'),
  gross: document.getElementById('gross'),
  taxNat: document.getElementById('taxNat'),
  netOut: document.getElementById('netOut'),
  je: document.getElementById('je'),
  copyBtn: document.getElementById('copyBtn'),
  resetBtn: document.getElementById('resetBtn'),
  divSubRow: document.getElementById('divSubRow'),
  cpyYear: document.getElementById('cpy-year'),
  lastUpdated: document.getElementById('last-updated-date'),
  buildRev: document.getElementById('build-rev'),
};

/* 税率判定 */
function getSel(name){ const el=document.querySelector(`input[name="${name}"]:checked`); return el?el.value:null; }
function getRate(){
  const itype = getSel('itype');   // interest or dividend
  if(itype==='interest'){ return {rNat:0.15315, labelNat:"15.315%"}; }
  const dkind = getSel('divkind'); // listed/unlisted
  if(dkind==='listed'){ return {rNat:0.15315, labelNat:"15.315%"}; }
  return {rNat:0.2042, labelNat:"20.42%"}; // unlisted
}

/* 逆算（国税のみ） */
function reverseFromNet(net, rNat){
  if(!(net>0)) return null;
  let g = Math.ceil(net / (1 - rNat));
  for(let i=0;i<2000;i++){
    const tNat = Math.floor(g * rNat);
    const calcNet = g - tNat;
    if(calcNet === net){ return {gross:g, tNat, net:calcNet}; }
    if(calcNet > net){ g--; } else { g++; }
  }
  const tNat = Math.floor(g * rNat);
  return {gross:g, tNat, net:g - tNat};
}

/* 画面更新 */
function update(){
  const itype = getSel('itype');
  els.divSubRow.style.display = (itype==='dividend') ? '' : 'none';

  const raw = uncomma(els.net.value);
  els.net.value = raw ? raw.toLocaleString("ja-JP") : "";

  const {rNat, labelNat} = getRate();
  els.rNat.textContent = labelNat;
  els.rTot.textContent = labelNat;

  if(!raw){
    els.gross.textContent = "—";
    els.taxNat.textContent = "—";
    els.netOut.textContent = "—";
    els.je.textContent = "入金額を入力すると自動表示します。";
    return;
  }

  const rev = reverseFromNet(raw, rNat);
  if(!rev){ return; }

  els.gross.textContent = "¥"+fmt(rev.gross);
  els.taxNat.textContent = "¥"+fmt(rev.tNat);
  els.netOut.textContent = "¥"+fmt(rev.net);

  const acctRev = (itype==='interest') ? "受取利息" : "受取配当金";
  const acctTax = "租税公課または法人税等";
  const acctBank = "普通預金";
  const taxNote = (itype==='interest')
    ? "（課税区分：3（非課税売上））"
    : "（課税区分：0（対象外））";

  let lines = [];
  lines.push(`【計算内訳】`);
  lines.push(`  源泉前総額 ${acctRev}: ¥${fmt(rev.gross)}`);
  lines.push(`  源泉所得税等（国税）: ¥${fmt(rev.tNat)}（税率 ${labelNat}）`);
  lines.push(`  手取額（入金額）: ¥${fmt(rev.net)}\n`);

  lines.push(`【仕訳（例）】`);
  lines.push(`（借）${acctBank.padEnd(14,"　")} ¥${fmt(rev.net)}`);
  if(rev.tNat>0) lines.push(`（借）${acctTax.padEnd(14,"　")} ¥${fmt(rev.tNat)}`);
  lines.push(`　　　（貸）${acctRev}${taxNote} ¥${fmt(rev.gross)}\n`);

  if(itype==='dividend'){
    lines.push(`※税務メモ：法人の受取配当は区分・持株割合により益金不算入あり（法人税計算で調整）。`);
  }else{
    lines.push(`※メモ：法人の預金利息は2016/1/1以後、地方税（利子割）なし。`);
  }

  els.je.textContent = lines.join("\n");
}

/* イベント */
document.querySelectorAll('input[name="itype"],input[name="divkind"]').forEach(el=>{
  el.addEventListener('change', update);
});
els.net.addEventListener('input', update);
document.getElementById('resetBtn').addEventListener('click', ()=>{
  document.getElementById('t_interest').checked = true;
  document.getElementById('div_listed').checked = true;
  els.net.value = "";
  update();
});
document.getElementById('copyBtn').addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(els.je.textContent);
    document.getElementById('copyBtn').textContent = "コピーしました";
    setTimeout(()=>document.getElementById('copyBtn').textContent="仕訳をコピー",1200);
  }catch(e){ alert("コピーに失敗しました。"); }
});

/* ---- フッター：年号・最終更新日の自動表示 ---- */
(function(){
  // 年号
  try{
    els.cpyYear.textContent = String(new Date().getFullYear());
  }catch(_){/* noop */}

  // 最終更新日（document.lastModified -> YYYY-MM-DD）
  try{
    const lm = new Date(document.lastModified);
    const y = lm.getFullYear();
    const m = String(lm.getMonth()+1).padStart(2,'0');
    const d = String(lm.getDate()).padStart(2,'0');
    els.lastUpdated.textContent = `${y}-${m}-${d}`;
  }catch(_){
    els.lastUpdated.textContent = '';
  }

  // ビルド番号（r4固定。将来の自動化に備えてDOM経由）
  els.buildRev.textContent = 'r4';
})();

/* 初期描画 */
update();
</script>
</body>
</html>
